{% extends 'efp/base.html' %}
{% load static from staticfiles %}

{% block content %}
    <script src="{% static "efp/js/main_sg.js" %}"></script>
    <script src="{% static "efp/js/vendor/bootstrap-select.js" %}"></script>
        <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/css/bootstrap-select.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>
    <div class="jumbotron">
      <div class="container">
          <div id="myGrid" style="width:1100px;height:500px;"></div>
<div id="geneselid">
</div>

      <div id="zmaD2016"> </div>
      <div id="dummy1"> </div>
      <div id="dummy2"> </div>

      </div>
    </div>

    <div class="container">
      <!-- Example row of columns -->
      </div>
      <hr>

      <footer>
      </footer>
    </div>

        <!--<script src="js/main_sg.js"></script>-->



    <div id="fmtww"></div>
    <div id="fmtwd"></div>


<script type="text/javascript">
d3.json("{% url "tablejson" %}", function(error, data) {
    console.log(data,"data");

    console.log(error,"errr");
    var dt = data;
    var grid;
    var columns = [
        {id: "maize_name", name: "Maize ID", field: "maize_name", sortable: true},
        {id: "d2016BS3", name: "Denton_2016.BS.Slice_3", field: "Denton_2016.BS.Slice_3", sortable: true},

    ];

    var options = {
        enableCellNavigation: true,
        enableColumnReorder: false,
        multiColumnSort: true
    };
    dataview = new Slick.Data.DataView();
    grid = new Slick.Grid("#myGrid", dt, columns, options);
    dataview.setItems(dt);
    dataview.onRowCountChanged.subscribe(function (e, args) {
        grid.updateRowCount();
        grid.render();
    });
    dataview.onRowsChanged.subscribe(function (e, args) {
        grid.invalidateRows(args.rows);
        grid.render();
    });

    grid.onSort.subscribe(simplesort)

    function simplesort(e, args) {
        var cols = args.sortCols;
        var multisort = args.multiColumnSort;
        dataview.sort(function (dataRow1, dataRow2) {
            for (var i = 0; i < cols.length; i++) {
                var field = cols[i].sortCol.field;
                var value1 = dataRow1[field];
                var value2 = dataRow2[field];
                if (value1 == value2) continue;
                var sign = cols[i].sortAsc ? 1 : -1;
                return (value1 > value2) ? sign : -sign;
            }
            return 0;
        });
    }
});




function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}
</script>
{%endblock%}
